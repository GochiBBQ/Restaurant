--[[

â–ˆâ–€â–€â–„ â–ˆâ–€â–€â–ˆ â–ˆâ–€â–€â–„ â–ˆâ–€â–€â–ˆ â–ˆâ–‘â–‘â–ˆ â–ˆâ–€â–€â–„ â–€â–€â–ˆâ–€â–€ â–€â–€â–ˆ â–ˆâ–€â–€â–ˆ â–ˆâ–€â–€ â–ˆâ–‘â–ˆ 
â–ˆâ–‘â–‘â–ˆ â–ˆâ–‘â–‘â–ˆ â–ˆâ–‘â–‘â–ˆ â–ˆâ–‘â–‘â–ˆ â–ˆâ–‘â–‘â–ˆ â–ˆâ–€â–€â–„ â–‘â–‘â–ˆâ–‘â–‘ â–„â–€â–‘ â–ˆâ–„â–„â–ˆ â–ˆâ–‘â–‘ â–ˆâ–€â–„ 
â–€â–‘â–‘â–€ â–€â–€â–€â–€ â–€â–€â–€â–‘ â–€â–€â–€â–€ â–‘â–€â–€â–€ â–€â–€â–€â–‘ â–‘â–‘â–€â–‘â–‘ â–€â–€â–€ â–€â–‘â–‘â–€ â–€â–€â–€ â–€â–‘â–€

Author: nodoubtzack
For: Sakura Kitchen ðŸ¥¢
https://www.roblox.com/groups/6975354/Sakura-Kitchen#!/about

]]

-- ï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿
-- Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local PlayerService = game:GetService("Players")

-- ï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿
-- Variables
local Knit = require(ReplicatedStorage.Packages.Knit)
local Trove = require(ReplicatedStorage.Packages.Trove)
local trove = Trove.new()

local RateLimiter = require(Knit.Modules.RateLimiter)
local RequestRateLimiter = RateLimiter.NewRateLimiter(4)
local InConfirmation = {}
local Response

-- ï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿
-- Create Knit Service
local ConfirmationService = Knit.CreateService {
	Name = "ConfirmationService",
	Client = {
		Send = Knit.CreateSignal()	
	},
}

-- ï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿
-- Server Functions
function ConfirmationService:RequestConfirmation(Player: Player, Message: string)
	if not table.find(InConfirmation, Player) then
		trove:Add(self.Client.Send:Fire(Player, Message))
		table.insert(InConfirmation, Player)

		local Result = self:GetResult(Player)
		return Result
	end
end

function ConfirmationService:GetResult(Player: Player, callback)
	trove:Add(self.Client.Update:Connect(function(Sender: Player, Result: boolean)
		if Player == Sender and Result then
			table.remove(InConfirmation, table.find(InConfirmation, Player))
			Response = true
		else
			table.remove(InConfirmation, table.find(InConfirmation, Player))
			Response = false
		end
	end))

	repeat task.wait() until not table.find(InConfirmation, Player) and Response or not table.find(InConfirmation, Player) and not Response
	return Response
end
-- ï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿ï¸µâ€¿ï¸µï¸µâ€¿ï¸µâ€¿
-- Return Service to Knit.
return ConfirmationService